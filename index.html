<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mushroom Rush — Platform Mini-Mode</title>
<style>
  :root{--bg:#0b1220;--panel:#0f1a2a;--accent:#ffcc00;--muted:#9fb0c7}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#eaf6ff;background:linear-gradient(180deg,#071726 0%, #021018 100%)}
  .wrap{max-width:1100px;margin:18px auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,#ff8a00,#ffd54d);display:flex;align-items:center;justify-content:center;font-weight:800;color:#102}
  h1{font-size:20px;margin:0}
  .muted{color:var(--muted);font-size:13px}
  .panel{background:var(--panel);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 24px rgba(2,12,20,0.5)}
  .game-wrap{display:flex;gap:16px;margin-top:14px;flex-wrap:wrap}
  canvas{background:linear-gradient(180deg,#6fb3ff10,#48a4ff06);border-radius:8px;border:1px solid rgba(255,255,255,0.04);max-width:100%;height:auto;display:block;margin:0 auto}
  .hud{flex:1 1 280px;min-width:240px;padding:12px}
  .stat{display:flex;justify-content:space-between;margin-bottom:8px}
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  button{background:var(--accent);border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:700;font-size:15px;flex:1}
  .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .chip{background:rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--muted);font-size:13px}
  footer{color:var(--muted);font-size:13px;margin-top:12px;text-align:center}
  
  /* Mobile tweaks */
  @media(max-width:768px){
    h1{font-size:17px}
    .hud{order:2;width:100%}
    canvas{width:100% !important;height:auto !important}
    .controls button{flex:1 1 45%}
  }

  /* Mobile on-screen controls */
  .mobile-controls {
    display:none;
    position:fixed;
    bottom:20px;
    left:0;
    right:0;
    width:100%;
    padding:10px;
    box-sizing:border-box;
    z-index:1000;
    justify-content:space-between;
    align-items:flex-end;
    pointer-events:none;
  }
  .mobile-controls button {
    pointer-events:auto;
    background:var(--accent);
    border:none;
    padding:18px 20px;
    margin:4px;
    border-radius:12px;
    font-size:18px;
    font-weight:700;
    min-width:60px;
    min-height:60px;
  }
  .dpad {
    display:flex;
    flex:1;
    justify-content:flex-start;
    gap:8px;
  }
  .actions {
    display:flex;
    flex-direction:column;
    gap:10px;
    align-items:flex-end;
  }
  @media(max-width:768px){
    .mobile-controls{display:flex;}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">MR</div>
        <div>
          <h1>Mushroom Rush — Platform Mini-Mode</h1>
          <div class="muted">Platformer mini-game with Free Fire–styled items (original assets only).</div>
        </div>
      </div>
      <div class="panel" style="max-width:520px">
        <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px">
          <div>
            <strong>Mode:</strong> Platform Mini — Solo
            <div class="muted" style="margin-top:4px">Collect power-ups, survive waves and secure the airdrop!</div>
          </div>
          <div style="text-align:right;font-size:12px">
            <div class="muted">Controls</div>
            <div class="muted">← →: Move • ↑ / Space: Jump • Z: Use • R: Respawn</div>
          </div>
        </div>
      </div>
    </header>

    <div class="game-wrap">
      <div style="flex:2;min-width:260px">
        <canvas id="gameCanvas" width="820" height="460"></canvas>
      </div>

      <aside class="hud panel">
        <div class="stat"><div>Score</div><div id="score">0</div></div>
        <div class="stat"><div>Health</div><div id="hp">100</div></div>
        <div class="stat"><div>Shield</div><div id="shield">0</div></div>
        <div class="stat"><div>Airdrop Timer</div><div id="airdrop">--</div></div>
        <div class="muted" style="margin-top:8px">Pickups:</div>
        <div class="legend">
          <div class="chip">Mushroom = jump boost</div>
          <div class="chip">Armor Crate = shield</div>
          <div class="chip">Speed Can = sprint</div>
          <div class="chip">Grenade = clear enemies</div>
        </div>

        <div style="margin-top:12px" class="controls">
          <button id="startBtn">Start</button>
          <button id="pauseBtn">Pause</button>
          <button id="respawnBtn">Respawn</button>
        </div>

        <div style="margin-top:12px" class="muted">Objective: Survive waves, collect points, and protect the airdrop. Use power-ups strategically.</div>
        <footer>Responsive prototype — try on mobile!</footer>
      </aside>
    </div>
  </div>

  <!-- Mobile On-Screen Controls -->
  <div class="mobile-controls">
    <div class="dpad">
      <button data-key="arrowleft">←</button>
      <button data-key="arrowup">↑</button>
      <button data-key="arrowright">→</button>
    </div>
    <div class="actions">
      <button data-key="z">Grenade</button>
      <button data-key="r">Respawn</button>
    </div>
  </div>

<script>
// --- GAME CORE (same as your original, shortened for clarity) ---

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Fixed resolution
const W = 820, H = 460;
canvas.width = W;
canvas.height = H;

// Responsive scaling
function resizeCanvas(){
  let maxWidth = window.innerWidth * 0.95;
  let scale = Math.min(maxWidth / W, 1);
  canvas.style.width = W * scale + "px";
  canvas.style.height = H * scale + "px";
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// HUD
const scoreEl = document.getElementById('score');
const hpEl = document.getElementById('hp');
const shieldEl = document.getElementById('shield');
const airdropEl = document.getElementById('airdrop');

// Input
const keys = {};
window.addEventListener('keydown', e=>{keys[e.key.toLowerCase()]=true; if(e.key===' ') e.preventDefault();});
window.addEventListener('keyup', e=>{keys[e.key.toLowerCase()]=false});

// Buttons
document.getElementById('startBtn').addEventListener('click', startGame);
document.getElementById('pauseBtn').addEventListener('click', togglePause);
document.getElementById('respawnBtn').addEventListener('click', respawnPlayer);

// --- Mobile Controls Mapping ---
document.querySelectorAll(".mobile-controls button").forEach(btn=>{
  const key = btn.dataset.key;
  btn.addEventListener("touchstart", e=>{
    e.preventDefault();
    keys[key] = true;
  });
  btn.addEventListener("touchend", e=>{
    e.preventDefault();
    keys[key] = false;
  });
});

// --------- Your full game logic continues here (entities, update, draw, loop, etc.) ---------
// (Use the same game code you pasted earlier: player, platforms, pickups, enemies, update(), draw(), loop(), etc.)
</script>
</body>
</html>
